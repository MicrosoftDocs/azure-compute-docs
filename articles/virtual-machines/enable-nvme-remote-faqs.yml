### YamlMime:FAQ
metadata:
  title: NVMe - Remote NVMe Disks FAQ
  ms.date: 12/22/2025
  description: Get answers to common questions about working with remote NVMe disks on virtual machines.
  ms.service: azure-virtual-machines
  ms.topic: faq
  ms.custom: references_regions
title: FAQ for remote NVMe disks
summary: |
  This article addresses some common questions about support for remote NVM Express (NVMe) disks on virtual machines (VMs) created in Azure.



sections:
  - name: Azure Storage considerations for remote NVMe disks
    questions:
      - question: |
          What are the prerequisites to enable the remote NVMe interface on my VM?
        answer: |
          The `DiskControllerTypes` is defined during VM configuration and is determined by the selected VM size as either NVMe or Small Computer System Interface (SCSI). If you don't specify a `DiskControllerTypes` value, the platform automatically chooses the default controller based on the VM size configuration.
          
          To enable the remote NVMe interface on your VM, you must meet the following prerequisites:

          - Most modern Azure VM sizes support the NVMe disk controller type for remote storage. Support begins with Ebsv5 VM sizes and later generations (v6, v7).
          - [Select the operating system image](/azure/virtual-machines/enable-nvme-interface) that's tagged with NVMe support. For VM sizes that support the NVMe interface, Azure automatically configures the NVMe disk controller type during VM creation. The NVMe setting in the Advanced tab is selected by default and cannot be changed.
            
            :::image type="content" source="./media/enable-nvme/nvme-faq-1.png" alt-text="Screenshot of a prompt to select a disk controller type.":::

          - Opt in to NVMe by selecting the NVMe disk controller type in the Azure portal or in the Azure Resource Manager, Azure CLI, or Azure PowerShell template. For step-by-step instructions, refer to the [general NVMe FAQ](/azure/virtual-machines/enable-nvme-faqs).
     
      - question: |
          How can I resize a SCSI-based VM to a remote NVMe-enabled VM of a different size?
        answer: |
          You can use the following process to either:
          
          - Resize a SCSI-based VM created using an untagged image to an NVMe-enabled VM of a different size without re-creating the VM configurations and without tagging the image. 
          - Resize a SCSI-based VM to an NVMe-enabled VM of a different size without re-creating the VM configurations.
          
          The source VM can be either:
          
          - An untagged OS image that supports remote NVMe.
          - An NVMe-tagged OS image.
          
          To resize the VM, use the following command to run an [Azure PowerShell script](https://github.com/Azure/SAP-on-Azure-Scripts-and-Utilities/tree/main/NVMe-Preflight-Check) that sets the destination `discontrollertype` value of the VM as NVMe: 
                   
          ```PowerShell
          azure-nvme-VM-update.ps1 [-subscription_id] <String> [-resource_group_name] <String> [-vm_name] <String> [[-disk_controller_change_to] <String>] [-vm_size_change_to] <String> [[-start_vm_after_update] <Boolean>] [[-write_logfile] <Boolean>]
          ```
          For more details, refer to [SCSI to NVMe for Linux VMs](https://learn.microsoft.com/en-us/azure/virtual-machines/nvme-linux)
      - question: |
          How can I check if an image is tagged as NVMe? 
        answer: |
          To check if an image is tagged as NVMe, use the following command:
          
          ```
          az vm image show --urn URN_OF_IMAGE
          ```
      - question: |
          How do I create an image definition that supports NVMe for remote disks?
        answer: |
          To create an image definition that supports NVMe for remote disks, complete the following steps: 
          
          1. Upload an NVMe-supported virtual hard disk (VHD) to your storage account. [AzCopy](https://docs.microsoft.com/azure/storage/common/storage-use-azcopy-v10) is a fast way, but you can also use the portal to upload.
            
             ```
             azcopy copy <local path to your VHD> <container in your storage account>
             ```

          2. [Create an image gallery](https://docs.microsoft.com/azure/virtual-machines/create-gallery) by using Azure PowerShell, the portal, or the Azure CLI.
          
          3. [Create an image definition](https://docs.microsoft.com/azure/virtual-machines/image-version). Be sure to include `--feature DiskControllerTypes=SCSI,NVMe`.
            
             Here's an Azure CLI example:
            
             ```
             az sig image-definition create --resource-group <resourceGroupName> --gallery-name <galleryName> --gallery-image-definition <imageName> --publisher <publisher> --offer <offerName> --sku <skuName> --os-type <osType> --os-state <osState> --feature DiskControllerTypes=SCSI,NVMe
             ```

          4. [Create the image version](https://docs.microsoft.com/azure/virtual-machines/image-version) with the NVMe-supported VHD.
            
             Here's an Azure CLI example:
            
             ```
             az sig image-version create --resource-group <resourceGroupName> --gallery-name <galleryName> --gallery-image-definition <imageName> --gallery-image-version <version> --target-regions <region1> <region2> --replica-count <replicaCount> --os-vhd-uri <NVMe-supported vhd uri> --os-vhd-storage-account <storageAccount>
             ```  
      - question: |
          Which Azure disk storage options are compatible with remote NVMe disks?
        answer: |
          NVMe sizes can be combined with Azure Standard HDD, Standard SSD, Premium SSD v1, Premium SSD v2, and Ultra Disk Storage. For more information on Azure disk offerings, see [Azure managed disk types](/azure/virtual-machines/disks-types).
      - question: |
          Does Azure support live resizing on disks with NVMe VM sizes?
        answer: |
          Live resizing of NVMe is supported on Azure Premium SSD v1 disks, Premium SSD v2 disks, Standard SSD disks, and Standard HDD disks. You can also add remote NVMe disks without restarting the VM.
      - question: |
          How can I identify remote NVMe disks on a Linux VM?
        answer: |
          1. Get the `nvme-cli` package: 
            
             ```
             sudo apt install nvme-cli
             ```
          2. Run the NVMe `list` command to fetch NVMe disk details:

             ```
             sudo nvme list
             ``` 
                         
             :::image type="content" source="./media/enable-nvme/nvme-faq-4.png" alt-text="Screenshot of instructions to identify NVMe disks on a Linux virtual machine.":::

             :::image type="content" source="./media/enable-nvme/nvme-faq-5.png" alt-text="Screenshot of instructions to choose a namespace ID in the Linux portal.":::
            
             Here's how the data appears in response to Azure PowerShell commands:
                     
             :::image type="content" source="./media/enable-nvme/nvme-faq-6.png" alt-text="Screenshot of an example response to an Azure PowerShell command.":::
      - question: |
          How can I identify NVMe disks on a Windows VM?  
        answer: |
          Open Azure PowerShell and use the following command: 
          
          ```
          wmic diskdrive get model,scsilogicalunit
          ```

          :::image type="content" source="./media/enable-nvme/nvme-faq-7.png" alt-text="Screenshot of an example PowerShell command to use NVMe on Windows.":::
        
          The ASAP attached disks are presented in the guest with the model string `Virtual_Disk NVMe Premium`. The SCSI logical unit has the value for the portal-visible LUN ID incremented by 1.
          
          Here's a snapshot of how NVMe disks appear in an NVMe-enabled Windows VM: 

          :::image type="content" source="./media/enable-nvme/nvme-faq-8.png" alt-text="Screenshot that shows an example of an Azure PowerShell command to identify the NVMe disk on a Windows VM.":::

          The following snapshot shows guest output for data disks attached at LUN 0 and LUN 4 (CRP). The LUN ID is equivalent to the namespace ID.

          :::image type="content" source="./media/enable-nvme/nvme-faq-9.png" alt-text="Screenshot that shows an example of how NVMe disks appear in an NVMe-enabled Windows VM.":::

      - question: |
          Are shared disks in remote disks supported with NVMe-enabled VMs?
        answer: |
          The shared disk feature is supported for Premium SSD, Premium SSD v2, and Ultra Disk Storage disks. Shared Disks using NVMe isn't supported with the OS Windows Server 2019.
      - question: |
          Can a data disk be detached from a SCSI-based VM and then attached to an NVMe-based VM?
        answer: |
          Yes. A data disk can be detached from a SCSI-based VM and attached to an NVMe-based VM. Once attached, the disk type will automatically convert to NVMe.
